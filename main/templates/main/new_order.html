{% extends 'base.html' %}

{% block title %}Заказы{% endblock title %}

{% block content %}

    <div>
        <div class="container">
            <h2 class="text-center">Сделать новый заказ</h2>
            <hr class="mb-4">
            <button class="btn btn-outline-secondary mb-4" data-toggle="collapse" data-target="#hide-me"
                    aria-expanded="true">Правила оформления заказа
            </button>
            <div id="hide-me" class="collapse in">
                <p class="mb-5">В поле 'Фото товара' выберите одну или несколько фотографий товаров,
                    далее нажмите 'Заказать', автоматически фотографии будут добавлены к заказу.
                    Далее Вы можете изменить данные по каждому товару. Заказ возможно редактировать только,
                    пока он в статусе '{{ STATUS_CREATED_STR }}'</p>
            </div>

            <form class="needs-validation" id="order" action="" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group row">
                    <label for="photo-input" class="col-2 col-form-label">Фото товара</label>
                    <div class="col-10 custom-file">
                        <input class="custom-file-input" type="file" name="{{ form.images.name }}" multiple=""
                               id="photo-input">
                        <label class="custom-file-label text-truncate">выберите файл</label>
                    </div>
                </div>

                <div class="mb-4 text-center">
                    <button class="btn btn-outline-dark" type="submit">Заказать</button>
                    <button class="btn btn-outline-dark" type="">Отмена</button>
                </div>
            </form>
        </div>
    </div>
    <script>
        $('.custom-file-input').on('change', function () {
            let fileName = $(this).val().split('\\').pop();
            $(this).next('.custom-file-label').addClass("selected").html(fileName);
        });

        $(function () {
            $('#order').change(function () {
                let sum = parseInt($("#price-input").val(), 10) * parseInt($("#count-input").val(), 10);

                $('#check_sum').html(sum + sum / 10);
            });
        });

    </script>
{% endblock content %}